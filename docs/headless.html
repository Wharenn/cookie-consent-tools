<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width"/>
        <title>Cookie Consent Tools</title>
        <script type="text/javascript" src="../dist/cookie-consent-tools.min.js"></script>
        <link rel="stylesheet" href="../dist/cookie-consent-tools.min.css"/>
        <link rel="stylesheet" href="style.css"/>
    </head>
    <body>
        <div id="container">
            <h1>Cookie Consent Tools</h1>
            <div class="buttons">
                <a href="index.html">Message Mode</a>
                <a href="choice.html">Choice Mode</a>
                <a href="headless.html" class="active">Headless (no banner)</a>
            </div>
            <div class="description">
                In headless mode, cookie Manager is used to set, reset or get consent status.
            </div>
            <div class="buttons">
                <a href="#" id="reset-button">Reset consent</a>
                <a href="#" id="approve-button">Give consent</a>
                <a href="#" id="decline-button">Revoke consent</a>
                <a href="#" id="has-consent-button">Has consent?</a>
                <a href="#" id="has-choice-button">Has made a choice?</a>
            </div>
            <pre id="textZone"></pre>
        </div>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', () => {
                var textZone = document.getElementById('textZone');
                var write = function (message) {
                    textZone.innerHTML = textZone.innerHTML + "\n" + message;
                }
                var cct = window.cookieConsentTools;
                var options = {
                    consentBox: {
                        autoDisplay: false,
                    },
                    onConsentLoaded: function (hasConsent) {
                        write('onConsentLoaded: has consent? ' + hasConsent);
                    },
                    onConsentUpdated: function (hasConsent) {
                        write('onConsentUpdated: has consent? ' + hasConsent);
                    }
                };

                cct.initialize(options);

                document.getElementById('reset-button').addEventListener('click', function () {
                    write('Reseting consent');
                    cct.cookieManager.resetConsent();
                    write('document.cookie = ' + document.cookie);
                });
                document.getElementById('approve-button').addEventListener('click', function () {
                    write('Giving consent');
                    cct.cookieManager.approve();
                    write('document.cookie = ' + document.cookie);
                });
                document.getElementById('decline-button').addEventListener('click', function () {
                    write('Revoking consent');
                    cct.cookieManager.decline();
                    write('document.cookie = ' + document.cookie);
                });
                document.getElementById('has-consent-button').addEventListener('click', function () {
                    write('Has consent? ' + (cct.cookieManager.hasConsent() ? 'Yes' : 'Nope'));
                });
                document.getElementById('has-choice-button').addEventListener('click', function () {
                    write('Has made choice? ' + (cct.cookieManager.hasMadeChoice() ? 'Yes' : 'Nope'));
                });
            });
        </script>
    </body>
</html>
